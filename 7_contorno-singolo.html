<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pagina contorno</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/prodottoSingolo.css">
    <link href="css/colors-fonts.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Barlow+Semi+Condensed:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Rock+3D&family=Tomorrow:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
</head>

<body>
<div class="container-fluid">
    <div class="row">
        <!-- Menu laterale -->
        <aside class="col-3 menu d-flex flex-column align-items-center justify-content-between py-3">
            <div class="row">
                <div class="col-md-12">
                    <div class="logo">
                    <a href="2_home.html"><img src="img/logo.png" alt="AstroVeggie Logo" class="img-fluid" width="1200"></a> 
                    </div>
                </div>
            </div>
            <div class="row w-100">
                <div class="col-md-12">
                    <nav class="nav flex-column">
                        <a href="3_categoria-panini-e-menu.html" class="nav-link">Panini e Menù</a>
                        <a href="6_categoria-contorni.html" class="nav-link active">Contorni</a>
                        <a href="8_categoria-bevande.html" class="nav-link">Bevande</a>
                        <a href="10_categoria-dolci.html" class="nav-link">Dolci</a>
                        <a href="12_pagina-offerte.html" class="nav-link">Offerte</a>
                        <a href="17_astrokids-home.html" class="nav-link">AstroKids</a>
                    </nav>
                </div>
            </div>
            <div class="row justify-content-around align-items-center">
                <div class="col-md-5 text-center">
                    <img src="img/chat2.jpeg" alt="translate button" class="img-fluid acc" width="600">
                </div>
                <div class="col-md-5 text-center">
                    <img src="img/accessibility3.jpeg" alt="accessibility button" class="img-fluid acc" width="600">
                </div>
            </div>
        </aside>

        <main class="col-9 justify-content-between py-3" style="height: 100vh;">
            <!-- Header -->
            <header class="row align-content-center flex-grow-1 text-center" style="flex: 0 0 10%;">
                <div class="col-md-3 d-flex justify-content-center">
                    <a href="6_categoria-contorni.html"><img src="img/arrowBack.png" alt="back button" class="img-fluid button-frame" width="600"></a>
                </div>
                <div class="col-md-6 d-flex justify-content-center">
                    <h1 class="text-uppercase text-center text-shadow fw-bold display-4">ASTROSALAD</h1>
                    <img src="img/singleProductBestseller.png" alt="Bestseller" class="bestseller">
                </div>
                <div class="col-md-3">
                    <img id="cart-img" src="img/cart.png" alt="cart button" class="img-fluid button-frame" width="600">

                    <!-- Mini rettangolo giallo con il prezzo -->
                    <div class="price-box-container">
                        <div class="price-box" id="total-price">0,00€</div>
                    </div>
                </div>
            </header>
            <!-- Sezione immagine + testo-->
            <div class="container-fluid">
                <div class="row">
                    <!-- Testo a sinistra (2 colonne) -->
                    <div class="col-md-3">
                        <p class="ingredients-list ingredients-sx-C">Broccolo solare</p>
                        <p class="ingredients-list ingredients-sx-C" style="margin-top: 800px">Green mix</p>
                        <p class="ingredients-list ingredients-sx-C" style="margin-top: 600px">Carota lunare</p>
                    </div>

                    <!-- Immagine centrale -->
                    <div class="col-md-7 d-flex justify-content-center">
                        <img src="img/singleSide.png" alt="astrosalad" class="individual-product">
                    </div>

                    <!-- Testo a destra (2 colonne) -->
                    <div class="col-md-2">
                        <p class="ingredients-list ingredients-dx-C" style="margin-right: 900px">Blue chili</p>
                        <p class="ingredients-list ingredients-dx-C" style="margin-top: 1300px">Cipollina galattica</p>
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-12 d-flex justify-content-center product-price position-relative">
                        <img src="img/spike.png" alt="price" class="img-fluid">
                        <p id="image-text" class="overlay-text">4,50€</p>
                    </div>
                </div>
            </div>
            <div class="category-container d-flex justify-content-center mb-custom">
                <div class="category-bar text-center">
                    <h2>Personalizza la tua AstroSalad</h2>
                </div>
            </div>
            <!-- card personalizza -->
            <div class="row justify-content-center mx-custom flash-card">
                <div class="col-12 mb-4">
                    <!-- Contenitore flessibile per testo, prezzo e pulsanti -->
                    <div class="d-flex align-items-center justify-content-between">
                        <!-- Sezione di testo e prezzo -->
                        <div class="d-flex flex-column">
                            <div class="d-flex justify-content-between">
                                <p class="customize-text">Broccolo solare</p>
                                <p class="extra-price-text" id="price-1">0,00€</p>
                            </div>
                            <div class="d-flex justify-content-between">
                                <p class="customize-text">Blue chili</p>
                                <p class="extra-price-text" id="price-2">0,00€</p>
                            </div>
                            <div class="d-flex justify-content-between">
                                <p class="customize-text">Carota lunare</p>
                                <p class="extra-price-text" id="price-3">0,00€</p>
                            </div>
                            <div class="d-flex justify-content-between">
                                <p class="customize-text">Cipollina galattica</p>
                                <p class="extra-price-text" id="price-4">0,00€</p>
                            </div>
                        </div>

                        <!-- card con pulsanti piu meno, ripetuta accanto ad ogni elemento -->
                        <div class="d-flex flex-column mb-5">
                            <!-- Cavolo cosmico -->
                            <div class="small-card d-flex align-items-center mb-5">
                                <div class="square-box d-flex align-items-center justify-content-center">
                                    <button class="btn btn-sm" onclick="updatePrice('minus', 1)">
                                        <img src="img/minusE.png" alt="remove" class="img-addDel">
                                    </button>
                                </div>
                                <div class="rectangle-box d-flex align-items-center justify-content-center">
                                    <p class="fw-bold" id="quantity-1">0</p>
                                </div>
                                <div class="square-box-piu d-flex align-items-center justify-content-center">
                                    <button class="btn btn-sm" onclick="updatePrice('plus', 1)">
                                        <img src="img/plusE.png" alt="add" class="img-addDel">
                                    </button>
                                </div>
                            </div>

                            <!-- Salsa cielo -->
                            <div class="small-card d-flex align-items-center mb-5">
                                <div class="square-box d-flex align-items-center justify-content-center">
                                    <button class="btn btn-sm" onclick="updatePrice('minus', 2)">
                                        <img src="img/minusE.png" alt="remove" class="img-addDel">
                                    </button>
                                </div>
                                <div class="rectangle-box d-flex align-items-center justify-content-center">
                                    <p class="fw-bold" id="quantity-2">0</p>
                                </div>
                                <div class="square-box-piu d-flex align-items-center justify-content-center">
                                    <button class="btn btn-sm" onclick="updatePrice('plus', 2)">
                                        <img src="img/plusE.png" alt="add" class="img-addDel">
                                    </button>
                                </div>
                            </div>

                            <!-- Rocket stellare -->
                            <div class="small-card d-flex align-items-center mb-5">
                                <div class="square-box d-flex align-items-center justify-content-center">
                                    <button class="btn btn-sm" onclick="updatePrice('minus', 3)">
                                        <img src="img/minusE.png" alt="remove" class="img-addDel">
                                    </button>
                                </div>
                                <div class="rectangle-box d-flex align-items-center justify-content-center">
                                    <p class="fw-bold" id="quantity-3">0</p>
                                </div>
                                <div class="square-box-piu d-flex align-items-center justify-content-center">
                                    <button class="btn btn-sm" onclick="updatePrice('plus', 3)">
                                        <img src="img/plusE.png" alt="add" class="img-addDel">
                                    </button>
                                </div>
                            </div>

                            <!-- Cetriolini marziani -->
                            <div class="small-card d-flex align-items-center mb-5">
                                <div class="square-box d-flex align-items-center justify-content-center">
                                    <button class="btn btn-sm" onclick="updatePrice('minus', 4)">
                                        <img src="img/minusE.png" alt="remove" class="img-addDel">
                                    </button>
                                </div>
                                <div class="rectangle-box d-flex align-items-center justify-content-center">
                                    <p class="fw-bold" id="quantity-4">0</p>
                                </div>
                                <div class="square-box-piu d-flex align-items-center justify-content-center">
                                    <button class="btn btn-sm" onclick="updatePrice('plus', 4)">
                                        <img src="img/plusE.png" alt="add" class="img-addDel">
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container text-center mt-1" style="max-width: 2200px;">
                <div class="row justify-content-center d-flex">
                    <!-- Primo bottone -->
                    <div class="col-12 mb-5">
                        <a href="#" class="btn-go3 d-block">
                            <img src="img/addCart.png" alt="cart" class="btn-icon">
                            Aggiungi al carrello
                        </a>
                    </div>
                </div>
            </div>
        </main>
    </div>
</div>

<!-- Bootstrap JavaScript -->
<script>
    // Prezzo base iniziale del panino
    const baseTotalPrice = 4.50;

    // Funzione per aggiornare il prezzo e la quantità
    function updatePrice(action, id) {
        // Prezzi base per ogni prodotto
        const basePrices = {
            1: 0.50,
            2: 0.50,
            3: 1.00,
            4: 0.50
        };

        // Ottieni gli elementi di quantità e prezzo
        const quantityElement = document.getElementById('quantity-' + id);
        const priceElement = document.getElementById('price-' + id);

        // Ottieni i bottoni più e meno
        const plusButton = document.querySelector(`[onclick="updatePrice('plus', ${id})"]`);
        const minusButton = document.querySelector(`[onclick="updatePrice('minus', ${id})"]`);

        // Ottieni l'immagine del pulsante più
        const plusImg = plusButton.querySelector("img");

        // Prezzo base del prodotto selezionato
        const basePrice = basePrices[id];

        // Ottieni la quantità attuale
        let currentQuantity = parseInt(quantityElement.innerText);

        // A seconda dell'azione (plus o minus), aggiorna la quantità e il prezzo
        if (action === 'plus' && currentQuantity < 5) {
            currentQuantity += 1;
        } else if (action === 'minus' && currentQuantity > 0) {
            currentQuantity -= 1;
        }

        // Calcola il nuovo prezzo dell'ingrediente selezionato
        let newPrice = basePrice * currentQuantity;

        // Formatta il prezzo con due decimali
        const formattedPrice = newPrice.toFixed(2).replace('.', ',');

        // Aggiorna la quantità e il prezzo nel DOM
        quantityElement.innerText = currentQuantity;
        priceElement.innerText = formattedPrice + '€';

        // ** Disattiva / Attiva il tasto "+" e cambia immagine **
        if (currentQuantity === 5) {
            plusButton.disabled = true;
            plusImg.src = "img/plusOff.png";  // Cambia immagine
        } else {
            plusButton.disabled = false;
            plusImg.src = "img/plusE.png";  // Ripristina immagine originale
        }

        // ** Disattiva / Attiva il tasto "-" **
        minusButton.disabled = (currentQuantity === 0);

        // ** Calcola il nuovo prezzo totale **
        let extraPrice = 0;
        for (let key in basePrices) {
            const quantity = parseInt(document.getElementById('quantity-' + key).innerText);
            extraPrice += basePrices[key] * quantity;
        }

        let finalPrice = baseTotalPrice + extraPrice;
        let formattedTotalPrice = finalPrice.toFixed(2).replace('.', ',');

        // ** Aggiorna il testo sovrapposto all'immagine **
        const imageTextElement = document.getElementById('image-text');
        if (imageTextElement) {
            imageTextElement.innerText = formattedTotalPrice + '€';
        }
    }
</script>
</body>
</html>
<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pagina dolce</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/prodottoSingolo.css">
    <link href="css/colors-fonts.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Barlow+Semi+Condensed:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Rock+3D&family=Tomorrow:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
</head>

<body>
<div class="container-fluid">
    <div class="row">
        <!-- Menu laterale -->
        <aside class="col-3 menu d-flex flex-column align-items-center justify-content-between py-3">
            <div class="row">
                <div class="col-md-12">
                    <div class="logo">
                        <img src="img/logo.png" alt="AstroVeggie Logo" class="img-fluid" width="1200">
                    </div>
                </div>
            </div>
            <div class="row w-100">
                <div class="col-md-12">
                    <nav class="nav flex-column">
                        <a href="#" class="nav-link">Panini e Menù</a>
                        <a href="#" class="nav-link">Contorni</a>
                        <a href="#" class="nav-link">Bevande</a>
                        <a href="#" class="nav-link active">Dolci</a>
                        <a href="#" class="nav-link">Offerte</a>
                        <a href="#" class="nav-link">AstroKids</a>
                    </nav>
                </div>
            </div>
            <div class="row justify-content-around align-items-center">
                <div class="col-md-5 text-center">
                    <img src="img/chat2.jpeg" alt="translate button" class="img-fluid acc" width="600">
                </div>
                <div class="col-md-5 text-center">
                    <img src="img/accessibility3.jpeg" alt="accessibility button" class="img-fluid acc" width="600">
                </div>
            </div>
        </aside>

        <main class="col-9 justify-content-between py-3" style="height: 100vh;">
            <!-- Header -->
            <header class="row align-content-center flex-grow-1 text-center" style="flex: 0 0 10%;">
                <div class="col-md-3 d-flex justify-content-center">
                    <a href="index.html"><img src="img/arrowBack.png" alt="back button" class="img-fluid button-frame" width="600"></a>
                </div>
                <div class="col-md-6 d-flex justify-content-center">
                    <h1 class="text-uppercase text-center text-shadow fw-bold display-4">ASTROBALL</h1>
                    <img src="img/singleProductBestseller.png" alt="Bestseller" class="bestseller">
                </div>
                <div class="col-md-3">
                    <img id="cart-img" src="img/cart.png" alt="cart button" class="img-fluid button-frame" width="600">

                    <!-- Mini rettangolo giallo con il prezzo -->
                    <div class="price-box-container">
                        <div class="price-box" id="total-price">0,00€</div>
                    </div>
                </div>
            </header>
            <!-- Sezione immagine + testo-->
            <div class="container-fluid">
                <div class="row">
                    <!-- Testo a sinistra (2 colonne) -->
                    <div class="col-md-3">
                        <p class="ingredients-list ingredients-sx-D">Meringa galassia</p>
                        <p class="ingredients-list ingredients-sx-D" style="margin-top: 1750px">Crema al thè lunare</p>
                    </div>

                    <!-- Immagine centrale -->
                    <div class="col-md-6 d-flex justify-content-center">
                        <img src="img/singleDessert.png" alt="Dolce" class="individual-product">
                    </div>

                    <!-- Testo a destra (2 colonne) -->
                    <div class="col-md-3">
                        <p class="ingredients-list ingredients-dx-D">Pistacchi alieni</p>
                        <p class="ingredients-list ingredients-dx-D" style="margin-top: 1350px">Biscotto con farina d'avena</p>
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-12 d-flex justify-content-center product-price position-relative">
                        <img src="img/spike.png" alt="prezzo prodotto" class="img-fluid">
                        <p id="image-text" class="overlay-text">4,50€</p>
                    </div>
                </div>
            </div>
            <div class="category-container d-flex justify-content-center mb-custom">
                <div class="category-bar text-center">
                    <h2>Personalizza la tua AstroBall</h2>
                </div>
            </div>
            <!-- card personalizza -->
            <div class="row justify-content-center mx-custom flash-card">
                <div class="col-12 mb-4">
                    <!-- Contenitore flessibile per testo, prezzo e pulsanti -->
                    <div class="d-flex align-items-center justify-content-between">
                        <!-- Sezione di testo e prezzo -->
                        <div class="d-flex flex-column">
                            <div class="d-flex justify-content-between">
                                <p class="customize-text">Gelato alla vaniglia</p>
                                <p class="extra-price-text" id="price-1">0,00€</p>

                            </div>
                            <div class="d-flex justify-content-between">
                                <p class="customize-text">Glassa</p>
                                <p class="extra-price-text" id="price-2">0,00€</p>
                            </div>
                        </div>

                        <!-- card con pulsanti più e meno -->
                        <div class="d-flex flex-column mb-5">
                            <!-- Cavolo cosmico -->
                            <div class="small-card d-flex align-items-center mb-5">
                                <div class="square-box d-flex align-items-center justify-content-center">
                                    <button class="btn btn-sm" onclick="updatePrice('minus', 1)">
                                        <img src="img/minusE.png" alt="meno" class="img-addDel">
                                    </button>
                                </div>
                                <div class="rectangle-box d-flex align-items-center justify-content-center">
                                    <p class="fw-bold" id="quantity-1">0</p>
                                </div>
                                <div class="square-box-piu d-flex align-items-center justify-content-center">
                                    <button class="btn btn-sm" onclick="updatePrice('plus', 1)">
                                        <img src="img/plusE.png" alt="più" class="img-addDel">
                                    </button>
                                </div>
                            </div>

                            <!-- Salsa cielo -->
                            <div class="small-card d-flex align-items-center mb-5">
                                <div class="square-box d-flex align-items-center justify-content-center">
                                    <button class="btn btn-sm" onclick="updatePrice('minus', 2)">
                                        <img src="img/minusE.png" alt="meno" class="img-addDel">
                                    </button>
                                </div>
                                <div class="rectangle-box d-flex align-items-center justify-content-center">
                                    <p class="fw-bold" id="quantity-2">0</p>
                                </div>
                                <div class="square-box-piu d-flex align-items-center justify-content-center">
                                    <button class="btn btn-sm" onclick="updatePrice('plus', 2)">
                                        <img src="img/plusE.png" alt="più" class="img-addDel">
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 text-center mt-4">
                        <p class="description-text">La Meringa Galassia è leggera e brillante, i Pistacchi Alieni croccanti e intensi. La Crema al Thè Lunare aggiunge una nota vellutata, mentre il Biscotto d'Avena dona una base calda e rustica.</p>
                    </div>
                </div>
            </div>
            <div class="container text-center mt-1" style="max-width: 2200px;">
                <div class="row justify-content-center d-flex">
                    <!-- bottone -->
                    <div class="col-12 mb-5">
                        <a href="#" class="btn-go3 d-block">
                            <img src="img/addCart.png" alt="Icon" class="btn-icon">
                            Aggiungi al carrello
                        </a>
                    </div>
                </div>
            </div>
        </main>
    </div>
</div>

<!-- Bootstrap JavaScript -->
<script>
    // Prezzo base iniziale del panino
    const baseTotalPrice = 4.50;

    // Funzione per aggiornare il prezzo e la quantità
    function updatePrice(action, id) {
        // Prezzi base per ogni prodotto
        const basePrices = {
            1: 1.50,
            2: 0.75,
        };

        // Ottieni gli elementi di quantità e prezzo
        const quantityElement = document.getElementById('quantity-' + id);
        const priceElement = document.getElementById('price-' + id);
        const plusButton = document.querySelector(`#quantity-${id}`).closest('.small-card').querySelector('.square-box-piu button');
        const plusImg = plusButton.querySelector("img");

        // Prezzo base del prodotto selezionato
        const basePrice = basePrices[id];

        // Ottieni la quantità attuale
        let currentQuantity = parseInt(quantityElement.innerText);

        // A seconda dell'azione (plus o minus), aggiorna la quantità e il prezzo
        if (action === 'plus' && currentQuantity < 5) {
            currentQuantity += 1;
        } else if (action === 'minus' && currentQuantity > 0) {
            currentQuantity -= 1;
        }

        // Calcola il nuovo prezzo dell'ingrediente selezionato
        let newPrice = basePrice * currentQuantity;

        // Formatta il prezzo con due decimali
        const formattedPrice = newPrice.toFixed(2).replace('.', ',');

        // Aggiorna la quantità e il prezzo nel DOM
        quantityElement.innerText = currentQuantity;
        priceElement.innerText = formattedPrice + '€';

        // ** Gestione del cambio immagine del pulsante "+" **
        if (currentQuantity === 5) {
            plusButton.disabled = true;
            plusImg.src = "img/plusOff.png"; // Cambia immagine
        } else {
            plusButton.disabled = false;
            plusImg.src = "img/plusE.png"; // Ripristina immagine originale
        }

        // ** Calcola il nuovo prezzo totale **
        let extraPrice = 0;
        for (let key in basePrices) {
            const quantity = parseInt(document.getElementById('quantity-' + key).innerText);
            extraPrice += basePrices[key] * quantity;
        }

        let finalPrice = baseTotalPrice + extraPrice;
        let formattedTotalPrice = finalPrice.toFixed(2).replace('.', ',');

        // ** Aggiorna il testo sovrapposto all'immagine **
        const imageTextElement = document.getElementById('image-text');
        if (imageTextElement) {
            imageTextElement.innerText = formattedTotalPrice + '€';
        }
    }
</script>
</body>
</html>
